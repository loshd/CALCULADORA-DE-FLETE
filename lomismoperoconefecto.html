<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Tarifa de Mudanza</title>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Open Sans', sans-serif;
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        .container {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            padding: 30px;
            width: 500px;
            max-width: 90%;
        }

        h2 {
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
        }

        input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 1em;
        }

        .button-group {
            display: flex;
            flex-direction: column; /* Apila los botones verticalmente */
            justify-content: space-around;
            margin-top: 20px;
        }

        button {
            flex: 1;
            padding: 12px 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: background-color 0.3s;
            margin: 5px 0; /* Espacio entre botones */
        }

        button:first-child {
            background-color: #28a745;
            color: white;
        }

        button:first-child:hover {
            background-color: #218838;
        }

        button:not(:first-child) {
            background-color: #6c757d;
            color: white;
        }

        button:not(:first-child):hover {
            background-color: #5a6268;
        }


        .receipt {
            text-align: left;
            background: #f9f9f9;
            padding: 20px;
            border-radius: 5px;
            margin-top: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transform: translateX(-100%); /* Inicialmente el recibo está fuera de la vista */
            transition: transform 1s ease-in-out; /* Agrega una transición suave */
        }

        .receipt.show {
            transform: translateX(0); /* Cuando se muestre, el recibo estará en su posición */
        }

        .receipt h3 {
            color: #343a40;
            margin-bottom: 15px;
            text-align: center;
        }

        .receipt p {
            margin-bottom: 8px;
        }

        .receipt hr {
            margin: 15px 0;
            border-top: 1px solid #ddd;
        }

        .receipt strong {
            font-weight: 600;
            display: inline-block;
            width: 120px;
            text-align: right;
            margin-right: 10px;
            color: #343a40;
        }

        .receipt span {
            font-weight: normal;
            display: inline-block;
            color: #343a40;
        }

        /* Media Query para pantallas pequeñas (celulares) */
        @media (max-width: 768px) {
            .button-group {
                flex-direction: column; /* Apila los botones verticalmente */
            }

            button {
                width: 100%; /* Los botones ocupan todo el ancho */
            }
        }

        /* Resaltar el total a pagar */
        .receipt p:last-child { /* Selecciona el último párrafo (total a pagar) */
            font-size: 1.5em; /* Aumenta el tamaño de la fuente */
            font-weight: bold; /* Pone el texto en negrita */
            color: #007bff; /* Color azul para destacar */
            background-color: #f0f0f0; /* Fondo gris claro para destacar */
            padding: 10px; /* Agrega espacio alrededor del texto */
            border-radius: 5px; /* Agrega bordes redondeados */
            margin-bottom: 20px; /* Agrega espacio debajo del total */
        }

        /* Estilos para la ventana emergente */
        .modal {
            display: none; /* Oculta la ventana por defecto */
            position: fixed; /* Fija la ventana en la pantalla */
            z-index: 1; /* Asegúrate de que esté por encima de otros elementos */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto; /* Permite el desplazamiento si el contenido es demasiado grande */
            background-color: rgba(0, 0, 0, 0.4); /* Fondo semi-transparente */
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto; /* Centra la ventana */
            padding: 20px;
            border: 1px solid #888;
            width: 90%; /* Ancho de la ventana */
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        /* Ajustar el tamaño del texto en la ventana emergente */
        .modal-content p {
            font-size: 0.9em; /* Reduce el tamaño de la fuente */
        }

        /* Media queries para dispositivos móviles */
        @media (max-width: 768px) {
            .modal-content {
                width: 95%; /* Ajusta el ancho para pantallas pequeñas */
            }

            .receipt {
                font-size: 0.8em; /* Reduce el tamaño de la fuente para pantallas pequeñas */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Calculadora de Tarifa de Mudanza</h2>
        <div class="form-group">
            <label for="origen">Dirección de recogida:</label>
            <input type="text" id="origen" placeholder="Ej. Plaza de Armas, Arequipa">
        </div>
        <div class="form-group">
            <label for="destino">Dirección de destino:</label>
            <input type="text" id="destino" placeholder="Ej. Av. Ejército, Arequipa">
        </div>
        <div class="button-group">
            <button id="calcularTarifa" onclick="calcularTarifa()">Calcular Tarifa</button>
            <button onclick="calcularRuta()">Mostrar Ruta</button>
            <button onclick="editarCostos()">Editar Costos</button>
            <button onclick="limpiarFormulario()">Limpiar</button>
            <button onclick="imprimirRecibo()">Imprimir Recibo</button>
            <button onclick="window.open('https://wa.me/51925676436')">Ayuda y Sugerencias</button>
        </div>

        <!-- Ventana emergente (modal) -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal()">&times;</span>
                <div id="recibo" class="receipt" style="display: none;">
                    <h3>Recibo de Mudanza</h3>
                    <p><strong>Empresa:</strong> <span id="nombre_empresa"></span></p>
                    <p><strong>Cliente:</strong> <span id="nombre_cliente"></span></p>
                    <p><strong>Origen:</strong> <span id="mostrar_origen"></span></p>
                    <p><strong>Destino:</strong> <span id="mostrar_destino"></span></p>
                    <p><strong>Distancia Total:</strong> <span id="mostrar_distancia"></span> km</p>
                    <hr>
                    <p><strong>Costo Base:</strong> S/. <span id="costo_base"></span></p>
                    <p><strong>Costo por Kilómetro:</strong> S/. <span id="costo_km"></span></p>
                    <p><strong>Costo por Distancia:</strong> S/. <span id="costo_distancia"></span></p>
                    <p><strong>Costo por Carga Pesada:</strong> S/. <span id="costo_carga"></span></p>
                    <hr>
                    <p><strong>Total a Pagar:</strong> S/. <span id="total"></span></p>
                </div>
            </div>
        </div>

    </div>

    <script>
        let c_base = 50;
        let c_carga_pesada = 15;
        let c_distancia = 5;
        let nombre_empresa = "";
        let nombre_cliente = "";
        let reciboContent = ""; // Variable para almacenar el contenido del recibo

        function calcularRuta() {
            let origen = document.getElementById("origen").value;
            let destino = document.getElementById("destino").value;

            if (origen && destino) {
                let url = `https://www.google.com/maps/dir/${encodeURIComponent(origen)}/${encodeURIComponent(destino)}/`;
                window.open(url, "_blank");
            } else {
                alert("Por favor, ingresa ambas direcciones.");
            }
        }

        function calcularTarifa() {
            let origen = document.getElementById("origen").value;
            let destino = document.getElementById("destino").value;

            if (!origen || !destino) {
                alert("Por favor, ingresa ambas direcciones.");
                return;
            }

            let distancia_km = parseFloat(prompt("Ingresa la distancia en km (según Google Maps):"));
            let cantidad_carga_pesada = parseInt(prompt("Ingresa la cantidad de objetos pesados:"));

            if (!isNaN(distancia_km) && !isNaN(cantidad_carga_pesada)) {
                let costo_por_distancia = c_distancia * distancia_km;
                let costo_por_carga = c_carga_pesada * cantidad_carga_pesada;
                let total = c_base + costo_por_distancia + costo_por_carga;

                document.getElementById("mostrar_origen").innerText = origen;
                document.getElementById("mostrar_destino").innerText = destino;
                document.getElementById("mostrar_distancia").innerText = distancia_km.toFixed(2);
                document.getElementById("costo_base").innerText = c_base.toFixed(2);
                document.getElementById("costo_km").innerText = c_distancia.toFixed(2);
                document.getElementById("costo_distancia").innerText = costo_por_distancia.toFixed(2);
                document.getElementById("costo_carga").innerText = costo_por_carga.toFixed(2);
                document.getElementById("total").innerText = total.toFixed(2);

                // Muestra la ventana emergente
                document.getElementById("myModal").style.display = "block";

                // Muestra el recibo con la clase 'show' para que se deslice
                document.getElementById("recibo").classList.add("show");
                document.getElementById("recibo").style.display = "block"; // Asegúrate de que el recibo sea visible

                // Almacena el contenido del recibo para imprimirlo
                reciboContent = document.getElementById("recibo").innerHTML;
            } else {
                alert("Por favor, ingresa valores válidos.");
            }
        }

        function editarCostos() {
            c_base = parseFloat(prompt("Costo base:", c_base)) || c_base;
            c_carga_pesada = parseFloat(prompt("Costo por carga pesada:", c_carga_pesada)) || c_carga_pesada;
            c_distancia = parseFloat(prompt("Costo por km:", c_distancia)) || c_distancia;
        }

        function limpiarFormulario() {
            // document.getElementById("recibo").style.display = "none";
            // document.getElementById("recibo").classList.remove("show");  Elimina la clase 'show' para que el recibo se oculte 
            document.getElementById("origen").value = "";
            document.getElementById("destino").value = "";
            document.getElementById("nombre_empresa").innerText = "";
            document.getElementById("nombre_cliente").innerText = "";
            document.getElementById("mostrar_origen").innerText = "";
            document.getElementById("mostrar_destino").innerText = "";
            document.getElementById("mostrar_distancia").innerText = "";
            document.getElementById("costo_base").innerText = "";
            document.getElementById("costo_km").innerText = "";
            document.getElementById("costo_distancia").innerText = "";
            document.getElementById("costo_carga").innerText = "";
            document.getElementById("total").innerText = "";
        }

        function imprimirRecibo() {
            nombre_empresa = prompt("Nombre de la empresa:");
            nombre_cliente = prompt("Nombre del cliente:");

            // Actualiza el contenido del recibo con los datos del cliente y la empresa
            document.getElementById("nombre_empresa").innerText = nombre_empresa;
            document.getElementById("nombre_cliente").innerText = nombre_cliente;

            // Actualiza el contenido del recibo antes de imprimir
            reciboContent = document.getElementById("recibo").innerHTML;

            // Imprime el recibo
            let ventana = window.open("", "_blank");
            ventana.document.write(reciboContent); // Utiliza el contenido almacenado
            ventana.document.close();
            ventana.print();
        }

        // Función para cerrar la ventana emergente
        function closeModal() {
            document.getElementById("myModal").style.display = "none";
        }
    </script>
</body>
</html>